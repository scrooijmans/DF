# Type Alias FutureReader Copy item path

<a href="https://opendal.apache.org/docs/rust/src/opendal/types/operator/operator_futures.rs.html#429" class="src">Source</a>

``` rust
pub type FutureReader<F> = OperatorFuture<ReaderOptions, Reader, F>;
```

Expand description

Future that generated by [`Operator::read_with`](https://opendal.apache.org/docs/rust/opendal/struct.Operator.html#method.read_with "method opendal::Operator::read_with") or [`Operator::reader_with`](https://opendal.apache.org/docs/rust/opendal/struct.Operator.html#method.reader_with "method opendal::Operator::reader_with").

Users can add more options by public functions provided by this struct.

## <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#notes" class="doc-anchor">Â§</a>Notes

`(OpRead, ())` is a trick to make sure `FutureReader` is different from `FutureRead`

## Aliased Type<a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#aliased-type" class="anchor">Â§</a>

``` rust
pub struct FutureReader<F> { /* private fields */ }
```

## Implementations<a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#implementations" class="anchor">Â§</a>

<a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#impl-OperatorFuture%3CReaderOptions,+Reader,+F%3E" class="anchor">Â§</a>

### impl\<F: <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" class="trait" title="trait core::future::future::Future">Future</a>\<Output = <a href="https://opendal.apache.org/docs/rust/opendal/type.Result.html" class="type" title="type opendal::Result">Result</a>\<<a href="https://opendal.apache.org/docs/rust/opendal/struct.Reader.html" class="struct" title="struct opendal::Reader">Reader</a>\>\>\> <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html" class="type" title="type opendal::operator_futures::FutureReader">FutureReader</a>\<F\>

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.version" class="fn">version</a>(self, v: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>) -\> Self

Set `version` for this `reader`.

This feature can be used to retrieve the data of a specified version of the given path.

If the version doesnâ€™t exist, an error with kind [`ErrorKind::NotFound`](https://opendal.apache.org/docs/rust/opendal/enum.ErrorKind.html#variant.NotFound "variant opendal::ErrorKind::NotFound") will be returned.

``` rust

let mut r = op.reader_with("path/to/file").version(version).await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.concurrent" class="fn">concurrent</a>(self, concurrent: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive">usize</a>) -\> Self

Set `concurrent` for the reader.

OpenDAL by default to write file without concurrent. This is not efficient for cases when users read large chunks of data. By setting `concurrent`, opendal will reading files concurrently on support storage services.

By setting `concurrent`, opendal will fetch chunks concurrently with the give chunk size.

``` rust
let r = op.reader_with("path/to/file").concurrent(8).await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.chunk" class="fn">chunk</a>(self, chunk_size: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive">usize</a>) -\> Self

OpenDAL will use servicesâ€™ preferred chunk size by default. Users can set chunk based on their own needs.

This following example will make opendal read data in 4MiB chunks:

``` rust
let r = op
    .reader_with("path/to/file")
    .chunk(4 * 1024 * 1024)
    .await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.gap" class="fn">gap</a>(self, gap_size: <a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive">usize</a>) -\> Self

Controls the optimization strategy for range reads in [`Reader::fetch`](https://opendal.apache.org/docs/rust/opendal/struct.Reader.html#method.fetch "method opendal::Reader::fetch").

When performing range reads, if the gap between two requested ranges is smaller than the configured `gap` size, OpenDAL will merge these ranges into a single read request and discard the unrequested data in between. This helps reduce the number of API calls to remote storage services.

This optimization is particularly useful when performing multiple small range reads that are close to each other, as it reduces the overhead of multiple network requests at the cost of transferring some additional data.

In this example, if two requested ranges are separated by less than 1MiB, they will be merged into a single read request:

``` rust
let r = op
    .reader_with("path/to/file")
    .chunk(4 * 1024 * 1024)
    .gap(1024 * 1024) // 1MiB gap
    .await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.if_match" class="fn">if_match</a>(self, etag: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>) -\> Self

Set `if-match` for this `read` request.

This feature can be used to check if the fileâ€™s `ETag` matches the given `ETag`.

If file exists and itâ€™s etag doesnâ€™t match, an error with kind [`ErrorKind::ConditionNotMatch`](https://opendal.apache.org/docs/rust/opendal/enum.ErrorKind.html#variant.ConditionNotMatch "variant opendal::ErrorKind::ConditionNotMatch") will be returned.

``` rust
use opendal::Operator;
let mut r = op.reader_with("path/to/file").if_match(etag).await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.if_none_match" class="fn">if_none_match</a>(self, etag: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>) -\> Self

Set `if-none-match` for this `read` request.

This feature can be used to check if the fileâ€™s `ETag` doesnâ€™t match the given `ETag`.

If file exists and itâ€™s etag match, an error with kind [`ErrorKind::ConditionNotMatch`](https://opendal.apache.org/docs/rust/opendal/enum.ErrorKind.html#variant.ConditionNotMatch "variant opendal::ErrorKind::ConditionNotMatch") will be returned.

``` rust
use opendal::Operator;
let mut r = op.reader_with("path/to/file").if_none_match(etag).await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.if_modified_since" class="fn">if_modified_since</a>(self, v: impl <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" class="trait" title="trait core::convert::Into">Into</a>\<<a href="https://opendal.apache.org/docs/rust/opendal/raw/struct.Timestamp.html" class="struct" title="struct opendal::raw::Timestamp">Timestamp</a>\>) -\> Self

Set `if-modified-since` for this `read` request.

This feature can be used to check if the file has been modified since the given timestamp.

If file exists and it hasnâ€™t been modified since the specified time, an error with kind [`ErrorKind::ConditionNotMatch`](https://opendal.apache.org/docs/rust/opendal/enum.ErrorKind.html#variant.ConditionNotMatch "variant opendal::ErrorKind::ConditionNotMatch") will be returned.

``` rust
use jiff::Timestamp;
use opendal::Operator;
let mut r = op
    .reader_with("path/to/file")
    .if_modified_since(time)
    .await?;
```

#### pub fn <a href="https://opendal.apache.org/docs/rust/opendal/operator_futures/type.FutureReader.html#method.if_unmodified_since" class="fn">if_unmodified_since</a>(self, v: impl <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" class="trait" title="trait core::convert::Into">Into</a>\<<a href="https://opendal.apache.org/docs/rust/opendal/raw/struct.Timestamp.html" class="struct" title="struct opendal::raw::Timestamp">Timestamp</a>\>) -\> Self

Set `if-unmodified-since` for this `read` request.

This feature can be used to check if the file hasnâ€™t been modified since the given timestamp.

If file exists and it has been modified since the specified time, an error with kind [`ErrorKind::ConditionNotMatch`](https://opendal.apache.org/docs/rust/opendal/enum.ErrorKind.html#variant.ConditionNotMatch "variant opendal::ErrorKind::ConditionNotMatch") will be returned.

``` rust
use jiff::Timestamp;
use opendal::Operator;
let mut r = op
    .reader_with("path/to/file")
    .if_unmodified_since(time)
    .await?;
```
