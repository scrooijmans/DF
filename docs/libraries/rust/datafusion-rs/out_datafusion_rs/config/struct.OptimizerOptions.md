# Struct OptimizerOptions Copy item path

<a href="https://docs.rs/datafusion-common/50.2.0/x86_64-unknown-linux-gnu/src/datafusion_common/config.rs.html#710-850" class="src">Source</a>

``` rust
pub struct OptimizerOptions {Show 23 fields
    pub enable_distinct_aggregation_soft_limit: bool,
    pub enable_round_robin_repartition: bool,
    pub enable_topk_aggregation: bool,
    pub enable_window_limits: bool,
    pub enable_dynamic_filter_pushdown: bool,
    pub filter_null_join_keys: bool,
    pub repartition_aggregations: bool,
    pub repartition_file_min_size: usize,
    pub repartition_joins: bool,
    pub allow_symmetric_joins_without_pruning: bool,
    pub repartition_file_scans: bool,
    pub repartition_windows: bool,
    pub repartition_sorts: bool,
    pub prefer_existing_sort: bool,
    pub skip_failed_rules: bool,
    pub max_passes: usize,
    pub top_down_join_key_reordering: bool,
    pub prefer_hash_join: bool,
    pub hash_join_single_partition_threshold: usize,
    pub hash_join_single_partition_threshold_rows: usize,
    pub default_filter_selectivity: u8,
    pub prefer_existing_union: bool,
    pub expand_views_at_output: bool,
}
```

Expand description

Options related to query optimization

See also: [`SessionConfig`](https://docs.rs/datafusion/latest/datafusion/prelude/struct.SessionConfig.html)

## Fields<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#fields" class="anchor">§</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.enable_distinct_aggregation_soft_limit" class="anchor field">§</a>`enable_distinct_aggregation_soft_limit: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the optimizer will push a limit operation into grouped aggregations which have no aggregate expressions, as a soft limit, emitting groups once the limit is reached, before all rows in the group are read.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.enable_round_robin_repartition" class="anchor field">§</a>`enable_round_robin_repartition: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the physical plan optimizer will try to add round robin repartitioning to increase parallelism to leverage more CPU cores

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.enable_topk_aggregation" class="anchor field">§</a>`enable_topk_aggregation: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the optimizer will attempt to perform limit operations during aggregations, if possible

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.enable_window_limits" class="anchor field">§</a>`enable_window_limits: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the optimizer will attempt to push limit operations past window functions, if possible

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.enable_dynamic_filter_pushdown" class="anchor field">§</a>`enable_dynamic_filter_pushdown: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true attempts to push down dynamic filters generated by operators into the file scan phase. For example, for a query such as `SELECT * FROM t ORDER BY timestamp DESC LIMIT 10`, the optimizer will attempt to push down the current top 10 timestamps that the TopK operator references into the file scans. This means that if we already have 10 timestamps in the year 2025 any files that only have timestamps in the year 2024 can be skipped / pruned at various stages in the scan.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.filter_null_join_keys" class="anchor field">§</a>`filter_null_join_keys: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the optimizer will insert filters before a join between a nullable and non-nullable column to filter out nulls on the nullable side. This filter can add additional overhead when the file format does not fully support predicate push down.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_aggregations" class="anchor field">§</a>`repartition_aggregations: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

Should DataFusion repartition data using the aggregate keys to execute aggregates in parallel using the provided `target_partitions` level

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_file_min_size" class="anchor field">§</a>`repartition_file_min_size: `<a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive"><code>usize</code></a>

Minimum total files size in bytes to perform file scan repartitioning.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_joins" class="anchor field">§</a>`repartition_joins: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

Should DataFusion repartition data using the join keys to execute joins in parallel using the provided `target_partitions` level

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.allow_symmetric_joins_without_pruning" class="anchor field">§</a>`allow_symmetric_joins_without_pruning: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

Should DataFusion allow symmetric hash joins for unbounded data sources even when its inputs do not have any ordering or filtering If the flag is not enabled, the SymmetricHashJoin operator will be unable to prune its internal buffers, resulting in certain join types - such as Full, Left, LeftAnti, LeftSemi, Right, RightAnti, and RightSemi - being produced only at the end of the execution. This is not typical in stream processing. Additionally, without proper design for long runner execution, all types of joins may encounter out-of-memory errors.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_file_scans" class="anchor field">§</a>`repartition_file_scans: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to `true`, datasource partitions will be repartitioned to achieve maximum parallelism. This applies to both in-memory partitions and FileSource’s file groups (1 group is 1 partition).

For FileSources, only Parquet and CSV formats are currently supported.

If set to `true` for a FileSource, all files will be repartitioned evenly (i.e., a single large file might be partitioned into smaller chunks) for parallel scanning. If set to `false` for a FileSource, different files will be read in parallel, but repartitioning won’t happen within a single file.

If set to `true` for an in-memory source, all memtable’s partitions will have their batches repartitioned evenly to the desired number of `target_partitions`. Repartitioning can change the total number of partitions and batches per partition, but does not slice the initial record tables provided to the MemTable on creation.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_windows" class="anchor field">§</a>`repartition_windows: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

Should DataFusion repartition data using the partitions keys to execute window functions in parallel using the provided `target_partitions` level

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.repartition_sorts" class="anchor field">§</a>`repartition_sorts: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

Should DataFusion execute sorts in a per-partition fashion and merge afterwards instead of coalescing first and sorting globally. With this flag is enabled, plans in the form below

``` text
     "SortExec: [a@0 ASC]",
     "  CoalescePartitionsExec",
     "    RepartitionExec: partitioning=RoundRobinBatch(8), input_partitions=1",
```

would turn into the plan below which performs better in multithreaded environments

``` text
     "SortPreservingMergeExec: [a@0 ASC]",
     "  SortExec: [a@0 ASC]",
     "    RepartitionExec: partitioning=RoundRobinBatch(8), input_partitions=1",
```

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.prefer_existing_sort" class="anchor field">§</a>`prefer_existing_sort: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When true, DataFusion will opportunistically remove sorts when the data is already sorted, (i.e. setting `preserve_order` to true on `RepartitionExec` and using `SortPreservingMergeExec`)

When false, DataFusion will maximize plan parallelism using `RepartitionExec` even if this requires subsequently resorting data using a `SortExec`.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.skip_failed_rules" class="anchor field">§</a>`skip_failed_rules: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the logical plan optimizer will produce warning messages if any optimization rules produce errors and then proceed to the next rule. When set to false, any rules that produce errors will cause the query to fail

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.max_passes" class="anchor field">§</a>`max_passes: `<a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive"><code>usize</code></a>

Number of times that the optimizer will attempt to optimize the plan

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.top_down_join_key_reordering" class="anchor field">§</a>`top_down_join_key_reordering: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the physical plan optimizer will run a top down process to reorder the join keys

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.prefer_hash_join" class="anchor field">§</a>`prefer_hash_join: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the physical plan optimizer will prefer HashJoin over SortMergeJoin. HashJoin can work more efficiently than SortMergeJoin but consumes more memory

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.hash_join_single_partition_threshold" class="anchor field">§</a>`hash_join_single_partition_threshold: `<a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive"><code>usize</code></a>

The maximum estimated size in bytes for one input side of a HashJoin will be collected into a single partition

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.hash_join_single_partition_threshold_rows" class="anchor field">§</a>`hash_join_single_partition_threshold_rows: `<a href="https://doc.rust-lang.org/nightly/std/primitive.usize.html" class="primitive"><code>usize</code></a>

The maximum estimated size in rows for one input side of a HashJoin will be collected into a single partition

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.default_filter_selectivity" class="anchor field">§</a>`default_filter_selectivity: `<a href="https://doc.rust-lang.org/nightly/std/primitive.u8.html" class="primitive"><code>u8</code></a>

The default filter selectivity used by Filter Statistics when an exact selectivity cannot be determined. Valid values are between 0 (no selectivity) and 100 (all rows are selected).

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.prefer_existing_union" class="anchor field">§</a>`prefer_existing_union: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, the optimizer will not attempt to convert Union to Interleave

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#structfield.expand_views_at_output" class="anchor field">§</a>`expand_views_at_output: `<a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive"><code>bool</code></a>

When set to true, if the returned type is a view type then the output will be coerced to a non-view. Coerces `Utf8View` to `LargeUtf8`, and `BinaryView` to `LargeBinary`.

## Trait Implementations<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#trait-implementations" class="anchor">§</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-Clone-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html" class="trait" title="trait core::clone::Clone">Clone</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.clone" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone" class="fn">clone</a>(&self) -\> <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

Returns a duplicate of the value. [Read more](https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#tymethod.clone)

1.0.0 · <a href="https://doc.rust-lang.org/nightly/src/core/clone.rs.html#245-247" class="src">Source</a><a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.clone_from" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from" class="fn">clone_from</a>(&mut self, source: &Self)

Performs copy-assignment from `source`. [Read more](https://doc.rust-lang.org/nightly/core/clone/trait.Clone.html#method.clone_from)

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-ConfigField-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/trait.ConfigField.html" class="trait" title="trait datafusion::config::ConfigField">ConfigField</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.set" class="anchor">§</a>

#### fn <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/trait.ConfigField.html#tymethod.set" class="fn">set</a>(&mut self, key: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>, value: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>) -\> <a href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" class="enum" title="enum core::result::Result">Result</a>\<<a href="https://doc.rust-lang.org/nightly/std/primitive.unit.html" class="primitive">()</a>, <a href="https://docs.rs/datafusion/50.2.0/datafusion/error/enum.DataFusionError.html" class="enum" title="enum datafusion::error::DataFusionError">DataFusionError</a>\>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.visit" class="anchor">§</a>

#### fn <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/trait.ConfigField.html#tymethod.visit" class="fn">visit</a>\<V\>(&self, v: <a href="https://doc.rust-lang.org/nightly/std/primitive.reference.html" class="primitive">&amp;mut V</a>, key_prefix: &<a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>, \_description: &'static <a href="https://doc.rust-lang.org/nightly/std/primitive.str.html" class="primitive">str</a>)

where V: <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/trait.Visit.html" class="trait" title="trait datafusion::config::Visit">Visit</a>,

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-Debug-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" class="trait" title="trait core::fmt::Debug">Debug</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.fmt" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fn">fmt</a>(&self, f: &mut <a href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" class="struct" title="struct core::fmt::Formatter">Formatter</a>\<'\_\>) -\> <a href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" class="enum" title="enum core::result::Result">Result</a>\<<a href="https://doc.rust-lang.org/nightly/std/primitive.unit.html" class="primitive">()</a>, <a href="https://doc.rust-lang.org/nightly/core/fmt/struct.Error.html" class="struct" title="struct core::fmt::Error">Error</a>\>

Formats the value using the given formatter. [Read more](https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt)

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-Default-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" class="trait" title="trait core::default::Default">Default</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.default" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" class="fn">default</a>() -\> <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

Returns the “default value” for a type. [Read more](https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default)

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-PartialEq-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html" class="trait" title="trait core::cmp::PartialEq">PartialEq</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.eq" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html#tymethod.eq" class="fn">eq</a>(&self, other: &<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>) -\> <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive">bool</a>

Tests for `self` and `other` values to be equal, and is used by `==`.

1.0.0 · <a href="https://doc.rust-lang.org/nightly/src/core/cmp.rs.html#264" class="src">Source</a><a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#method.ne" class="anchor">§</a>

#### fn <a href="https://doc.rust-lang.org/nightly/core/cmp/trait.PartialEq.html#method.ne" class="fn">ne</a>(&self, other: <a href="https://doc.rust-lang.org/nightly/std/primitive.reference.html" class="primitive">&amp;Rhs</a>) -\> <a href="https://doc.rust-lang.org/nightly/std/primitive.bool.html" class="primitive">bool</a>

Tests for `!=`. The default implementation is almost always sufficient, and should not be overridden without very good reason.

<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#impl-StructuralPartialEq-for-OptimizerOptions" class="anchor">§</a>

### impl <a href="https://doc.rust-lang.org/nightly/core/marker/trait.StructuralPartialEq.html" class="trait" title="trait core::marker::StructuralPartialEq">StructuralPartialEq</a> for <a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html" class="struct" title="struct datafusion::config::OptimizerOptions">OptimizerOptions</a>

## Auto Trait Implementations<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#synthetic-implementations" class="anchor">§</a>

## Blanket Implementations<a href="https://docs.rs/datafusion/50.2.0/datafusion/config/struct.OptimizerOptions.html#blanket-implementations" class="anchor">§</a>
