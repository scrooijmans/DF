Description: Parquet metadata API

Title: parquet::file::metadata - Rust

Docs.rs

- parquet-56.2.0

- parquet 56.2.0
- Permalink
- Docs.rs crate page
- Apache-2.0

- Links
- Homepage
- Repository
- crates.io
- Source

- Owners
- andygrove
- sunchao
- kou
- kszucs
- nevi-me
- sadikovi
- alamb
- tustvold

- Dependencies
- - arrow-array ^56.2.0 _normal_ _optional_
- arrow-buffer ^56.2.0 _normal_ _optional_
- arrow-cast ^56.2.0 _normal_ _optional_
- arrow-csv ^56.2.0 _normal_ _optional_
- arrow-data ^56.2.0 _normal_ _optional_
- arrow-ipc ^56.2.0 _normal_ _optional_
- arrow-schema ^56.2.0 _normal_ _optional_
- arrow-select ^56.2.0 _normal_ _optional_
- base64 ^0.22 _normal_ _optional_
- brotli ^8.0 _normal_ _optional_
- bytes ^1.1 _normal_
- chrono ^0.4.40 _normal_
- clap ^4.1 _normal_ _optional_
- crc32fast ^1.4.2 _normal_ _optional_
- flate2 ^1.1 _normal_ _optional_
- futures ^0.3 _normal_ _optional_
- half ^2.1 _normal_
- hashbrown ^0.16 _normal_
- lz4_flex ^0.11 _normal_ _optional_
- num ^0.4 _normal_
- num-bigint ^0.4 _normal_
- object_store ^0.12.0 _normal_ _optional_
- parquet-variant ^0.1.0 _normal_ _optional_
- parquet-variant-compute ^0.1.0 _normal_ _optional_
- parquet-variant-json ^0.1.0 _normal_ _optional_
- paste ^1.0 _normal_
- ring ^0.17 _normal_ _optional_
- seq-macro ^0.3 _normal_
- serde ^1.0 _normal_ _optional_
- serde_json ^1.0 _normal_ _optional_
- simdutf8 ^0.1.5 _normal_ _optional_
- snap ^1.0 _normal_ _optional_
- thrift ^0.17 _normal_
- tokio ^1.0 _normal_ _optional_
- twox-hash ^2.0 _normal_
- zstd ^0.13 _normal_ _optional_
- arrow ^56.2.0 _dev_
- base64 ^0.22 _dev_
- brotli ^8.0 _dev_
- criterion ^0.5 _dev_
- flate2 ^1.0 _dev_
- insta ^1.43.1 _dev_
- lz4_flex ^0.11 _dev_
- object_store ^0.12.0 _dev_
- rand ^0.9 _dev_
- serde_json ^1.0 _dev_
- snap ^1.0 _dev_
- sysinfo ^0.36.0 _dev_
- tempfile ^3.0 _dev_
- tokio ^1.0 _dev_
- zstd ^0.13 _dev_
- ahash ^0.8 _normal_
- ahash ^0.8 _normal_
- ring ^0.17 _normal_ _optional_

- Versions

- **100%** of the crate is documented

- Platform
- x86_64-unknown-linux-gnu
- Feature flags

- docs.rs
- About docs.rs
- Badges
- Builds
- Metadata
- Shorthand URLs
- Download
- Rustdoc JSON
- Build queue
- Privacy policy

- Rust
- Rust website
- The Book
- Standard Library API Reference
- Rust by Example
- The Cargo Guide
- Clippy Documentation

## Module metadata

parquet::file

# Module metadata Copy item path

Source

Expand description

Parquet metadata API

Most users should use these structures to interact with Parquet metadata. The crate::format module contains lower level structures generated from the Parquet thrift definition.

- `ParquetMetaData`: Top level metadata container, read from the Parquet file footer.

- `FileMetaData`: File level metadata such as schema, row counts and version.

- `RowGroupMetaData`: Metadata for each Row Group with a File, such as location and number of rows, and column chunks.

- `ColumnChunkMetaData`: Metadata for each column chunk (primitive leaf) within a Row Group including encoding and compression information, number of values, statistics, etc.

## §APIs for working with Parquet Metadata

The Parquet readers and writers in this crate handle reading and writing metadata into parquet files. To work with metadata directly, the following APIs are available:

- `ParquetMetaDataReader` for reading from a reader for I/O
- `ParquetMetaDataPushDecoder` for decoding from bytes without I/O
- `ParquetMetaDataWriter` for writing.

## §Examples

Please see `external_metadata.rs`

## §Metadata Encodings and Structures

There are three different encodings of Parquet Metadata in this crate:

1.  `bytes`:encoded with the Thrift `TCompactProtocol` as defined in parquet.thrift

2.  `format`: Rust structures automatically generated by the thrift compiler from parquet.thrift. These structures are low level and mirror the thrift definitions.

3.  `file::metadata` (this module): Easier to use Rust structures with a more idiomatic API. Note that, confusingly, some but not all of these structures have the same name as the `format` structures.

Graphically, this is how the different structures relate to each other:

```
┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─         ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─
┌──────────────┐     │         ┌───────────────────────┐ │
│ │ ColumnIndex  │              ││    ParquetMetaData    │
└──────────────┘     │         └───────────────────────┘ │
┌──────────────┐         │ ┌────────────────┐            │┌───────────────────────┐
│   ..0x24..   │ ◀────▶    │  OffsetIndex   │   │ ◀────▶  │    ParquetMetaData    │ │
└──────────────┘         │ └────────────────┘            │└───────────────────────┘
...         │                   ...             │
│ ┌──────────────────┐          │ ┌──────────────────┐
bytes                      │  FileMetaData*   │ │          │  FileMetaData*   │     │
(thrift encoded)         │ └──────────────────┘          │ └──────────────────┘
─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘         ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘

format::meta structures          file::metadata structures

* Same name, different struct
```

## Structs§

ColumnChunkMetaData

Metadata for a column chunk.

ColumnChunkMetaDataBuilder

Builder for `ColumnChunkMetaData`

ColumnIndexBuilder

Builder for Parquet `ColumnIndex`, part of the Parquet PageIndex

FileMetaData

File level metadata for a Parquet file.

FooterTail

Describes how the footer metadata is stored

LevelHistogram

Histograms for repetition and definition levels.

OffsetIndexBuilder

Builder for offset index, part of the Parquet PageIndex.

ParquetMetaData

Parsed metadata for a single Parquet file

ParquetMetaDataBuilder

A builder for creating / manipulating `ParquetMetaData`

ParquetMetaDataPushDecoder

A push decoder for `ParquetMetaData`.

ParquetMetaDataReader

Reads the `ParquetMetaData` from a byte stream.

ParquetMetaDataWriter

Writes `ParquetMetaData` to a byte stream

RowGroupMetaData

Metadata for a row group

RowGroupMetaDataBuilder

Builder for row group metadata.

## Enums§

PageIndexPolicy

Describes the policy for reading page indexes

## Type Aliases§

FileMetaDataPtr

Reference counted pointer for `FileMetaData`.

KeyValue

A key-value pair for `FileMetaData`.

ParquetColumnIndex

Page level statistics for each column chunk of each row group.

ParquetOffsetIndex

`OffsetIndexMetaData` for each data page of each row group of each column

RowGroupMetaDataPtr

Reference counted pointer for `RowGroupMetaData`.
